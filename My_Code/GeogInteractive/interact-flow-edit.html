<html>
<head>
<title>Interactive UVic Geog Curriculum Mapping</title>
<!--
Based on Code from https://hanns.io/pi/
Alysii's PI Scheme
 -->

<!--  updates: 
	2023-01-13: change background colour 

	 -->

<style type="text/css" media="screen">
	body { background-color: #152105; } /*change from black #000 */
	body,td { font: .8em Gotham, Helvetica Neue, Helvetica, Arial Narrow, Arial; font-weight: 500; color: #f0f6e8; padding: 0; margin: 0; }
	ul { list-style: none none; margin: 0; padding: 0; display: block; }
	
	a,a:link { color: #91dc35; text-decoration: none; }
	
	td { padding: 4px 4px; text-align: center; border: 1px solid #111; border-width: 1px 0; }
	tr:last-child td { border-bottom-width: 0; }
	tr.header td { padding: 10px 4px; font-size: 1.5em; font-weight: 200; color: #f0f6e8; }
	tr.header td i { font-size: .4em; font-weight: 200; font-style: normal; }

	.items li { margin: 5px 0px; }
	.items li.current span { text-shadow: 0px 0px 8px #bdf573; }
	/* .items li.current span { text-shadow: 0px 0px 8px #79cef4; } */
	.arrows li { margin: 5px 0px; color: #f0f6e8; }
	.items li span { white-space: nowrap; cursor: pointer; background-color: rgba(21,33,5,0.75); border-radius: 3px; padding: 1px 4px; }
	
	p,small {color: #f0f6e8; }

/*
	tr.footer { display: none; }
	tr.footer td { color: #111; }
	.p1 td,.p2 td,.p3 td,.p4 td,
	.p1,.p2,.p3,.p4 { font-weight: 900 !important; }
	.p1.current,.p2.current,.p3.current,.p4.current,
	.p1.current td,.p2.current td,.p3.current td,.p4.current td { color: red; }
*/
	#canvas { z-index: 1; display: block; position: absolute; left: 0; top: 0; background-color: transparent; }
	#pi { z-index: 2; border-collapse: collapse; position: relative; left: 0; top: 0; }

</style>
</head>
<body>
<table id="pi" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="header">
<td valign="top" style="text-align: right;">UVic Geography <br>Focused Studies</td>
<td valign="top" colspan="3" style="text-align: right;"><br><br>Basics</td>
<td valign="top"></td>
<td valign="top" colspan="3" style="text-align: left;"><br><br>Year1</td>
<td valign="top"></td>
<td valign="top" colspan="3" style="text-align: left;"><br><br>Year2</td>
<td valign="top"></td>
<td valign="top" colspan="3" style="text-align: left;"><br><br>Year3</td>
<td valign="top"></td>
<td valign="top" colspan="3" style="text-align: left;"><br><br>Year4</td>
</tr>
<tr>
<td class="items" style="text-align: right;">
<ul id="focus">
<li>Geog Major BA</li>
<li>::</li>
<li>Environment</li>
<li>Geomatics</li>
<li>Human</li>
<li>Physical</li>
</ul>
</td>
<td colspan="3" class="items" style="text-align: right;">
<ul id="basics">
<li class="environment geomatics human geog-major-ba physical">Opt 1 Pre-requisite</li>
<li class="environment geomatics human geog-major-ba physical">Pre-requisite 1</li>
<li class="environment geomatics human geog-major-ba physical">Pre-requisite 2</li>
<li class="geomatics">Opt 2 Pre-requisite</li>
<li class="environment physical">Opt 3 Pre-requisite</li>
<li class="geog-major-ba environment geomatics human physical">7 Elective Courses</li>

</ul>
</td>
<td>
<ul class="arrows">
<li>&rarr;</li>
<li>&rarr;</li>
<li>&rarr;</li>
<li>&rarr;</li>
<li>&rarr;</li>
<li>&rarr;</li>
<!-- 
<li>&rarr;</li>
<li>&rarr;</li>
<li>&rarr;</li>
<li>&rarr;</li>
<li>&rarr;</li>
<li>&rarr;</li>
<li>&rarr;</li>
<li>&rarr;</li>
<li>&rarr;</li> -->
</ul>
</td>
<td colspan="3" class="items" style="text-align: left;">
<ul id="year1">
<li class="opt-1-pre-requisite">Geog 101A Environment Society and Sustainability</li>
<li class="pre-requisite-1">Geog 101B Space Place and Society</li>
<li class="pre-requisite-2">Geog 103 Introduction to Physical Geography</li>
<li class="opt-2-pre-requisite">Geog 104 Our Digital Earth</li>
<li class="opt-3-pre-requisite">Geog 130 Climate Change</li>
<li class="7-elective-courses">Second Year Standing</li>

<!-- 
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
 -->

<!-- 

geog422-advanced-topics-in-digital-remote-sensing-
environment-society-and-sustainability 
space-place-and-society 
second-year-standing
geog-222-introduction-to-maps-and-gis
geog-228-introduction-to-remotes-sensing 
geog-322-digital-remote-sensing

<li class="">Geog </li>
 -->
</ul>
</td>
<td class="items"></td>
<td colspan="3" class="items" style="text-align: left;">
<ul id="year2">
<li class="geog-101a-environment-society-and-sustainability">Geog 209 Introduction to Environmental Management</li>
<li class="human geog-101b-space-place-and-society">Geog 211 Economic Geography</li>
<li class="human geog-101b-space-place-and-society">Geog 218 Social and Cultural Geography</li>
<li class="geomatics space-place-and-society environment-society-and-sustainability second-year-standing">Geog 222 Introduction to Maps and GIS</li>
<li class="human geog-101b-space-place-and-society environment-society-and-sustainability second-year-standing">Geog 226 Quatitative Methods</li>
<li class="geomatics geog-101b-space-place-and-society environment-society-and-sustainability second-year-standing">Geog 228 Introduction to Remote Sensing</li>
<li class="geog-101a-environment-society-and-sustainability">Geog 274 Introduction to Biogeography</li>
</ul>
</td>
<td class="items"></td>
<td colspan="3" class="items" style="text-align: left;">
<ul id="year3">
<li class="geog-101a-environment-society-and-sustainability">Geog 316 Field Studies in Human Geography</li>	
<li class="geog-101a-environment-society-and-sustainability">Geog 317 Field Studies in Sustainable Communities</li>	
<li class="geomatics second-year-standing geog-222-introduction-to-maps-and-gis">Geog 322 Digital Remote Sensing</li>
</ul>
</td>

<td class="items" style=""></td>
<td colspan="3" class="items"  style="text-align: left;">
<ul id="year4">
<li class="geomatics geog-322-digital-remote-sensing">Geog 422 Advanced Topics in Digital Remote Sensing</li>
<li class="geomatics geog-322-digital-remote-sensing">Geog 420 Field Studies in Coastal Geomatics</li>
</ul>
</td>
</tr>
<!-- 
<tr>
<td style="width: 12%;">&nbsp;</td>
<td style="width: 12%;">&nbsp;</td>
<td style="width: 4%;">&nbsp;</td>
<td style="width: 1%;">&nbsp;</td>
<td style="width: 1%;">&nbsp;</td>
<td style="width: 1%;">&nbsp;</td>
<td style="width: 4%;">&nbsp;</td>
<td style="width: 7%;">&nbsp;</td>
<td style="width: 1%;">&nbsp;</td>
<td style="width: 7%;">&nbsp;</td>
<td style="width: 7%;">&nbsp;</td>
<td style="width: 7%;">&nbsp;</td>
<td style="width: 1%;">&nbsp;</td>
<td style="width: 7%;">&nbsp;</td>
<td style="width: 7%;">&nbsp;</td>
<td style="width: 7%;">&nbsp;</td>
<td style="width: 1%;">&nbsp;</td>
<td style="width: 7%;">&nbsp;</td>
<td style="width: 4%;">&nbsp;</td>
<td style="width: 11%;">&nbsp;</td>
</tr> -->
</table>
<canvas id="canvas"></canvas>
<div style="position: fixed; bottom: 0; text-align: center; width: 100%;">
<p style="margin: 0px; font-size: .9em; color: #f0f6e8;">Note:</p>
<small style="font-size: 0.6em color: #f0f6e8;">This code has been adapted from <a href="https://hanns.io/pi/">https://hanns.io/pi/</a> for an educational experiment purpose only.<br>
	&copy; 2004 alysii.com &copy; 2004-2018 hanns.io All Rights Reserved.<br>
	Wendy Anthony <wanthony@uvic.ca> 2023-01-06; updated: 2023-01-13
</small>
<br><br>
</div>

<!-- focusPlane -->
</body>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script>
$(document).ready(function() {
// 	var colors = ["#333","#492f1f","#763c19","#f7941d","yellow","#79cef4","#00aeef","lime","green","#304b15"];
// grey, 3 oranges, yellow, 2 blues, 3 greens
// grey, 	darker orange, dark orange, brighter orange, yellow, blue - current list item colour, darker blue, lime, green, dark green

// color brewer colour=blind safe colour
// 	var colors = ["#898787","#8c510a","#bf812d", "#80cdc1", "#dfc27d", "#80cdc1","#35978f","#01665e"];

 	var colors = ["#5D5C5C","#492f1f","#763c19","#f7941d","yellow","#79cef4","#00aeef","lime","green","#304b15"];
	$(".items li").css({color:colors[0]});
	
	canvas();
	$(window).resize(function() { // todo: get event, only repaint on mouse release
		canvas();
	});

	// distribute before list to span
	$(".items ul li")
		.wrapInner($('<span />'))
		.each(function() {

			item = lower_case($(this).children("span").html());		// turn item name css compliant
			$(this).attr({ id: item });								// set li id as item name
			
			if ($(this).parents("ul").attr("id") != "focus") {		// focus has no before
				list = $(this).attr("class").split(/\s+/);			// get before items from li class
				for (i in list) {
					$("#"+list[i]+" span").addClass(item);			// find id with class, inject itself into span as class
				}
			}
		})
	$('.items')
		.on('mouseenter','ul li',function() {
			if (! $('#pi').hasClass('sticky')) {
				$(this).addClass("current");
				$(this).css({color:colors[5]});
				pi_link($(this));
			}
		})
		.on('mouseleave','ul li',function() {
			if (! $('#pi').hasClass('sticky')) {
				$(this).removeClass("current");
				$(".items li").css({color:colors[0]});
				canvas();
			}
		})
		.on('click','ul li',function() {
			
			if (!$(this).hasClass('current')) {
				$('#pi').removeClass('sticky')
			}
			
			if ($('#pi').hasClass('sticky')) {
				$('#pi').removeClass('sticky')
				
				$('.items li').removeClass('current').css({color:colors[0]});
			} else {
				$('#pi').addClass('sticky')
				
				$('.items li').removeClass('current').css({color:colors[0]});
				canvas();

				$(this).addClass("current");
				$(this).css({color:colors[5]});
				pi_link($(this));
			}
		})
		
		// $("ul#year1").hover(function() { $(".p1").toggleClass("current"); });
		// $("ul#year2").hover(function() { $(".p2").toggleClass("current"); });
		// $("ul#specialized").hover(function() { $(".p3").toggleClass("current"); });
		// $("ul#year4").hover(function() { $(".p4").toggleClass("current"); });
	
	function lower_case(s) { return s.toLowerCase().replace(/ /g, '-').replace(/\./g, ''); }
	function pi_link(item) {
		pi_link_before(item,-1);
		pi_link_after(item,1);
	}
	function pi_link_before(item, degree, depth) {
		type   = item.parent("ul").attr("id");
		degree = degree + ((type == "year1") ? 1 : 0);

		class_prefex = ".items li span.";
		$(".items li span."+item.attr("id"))
			.each(function() {
				$(this).parent("li").css({color: colors[5+degree]});
				if (type != "year1" && degree > -4) {
					line(item.children("span"),$(this),colors[5+degree],colors[5+degree+1]);
				}
				pi_link_before($(this).parent("li"),degree-1);
			});
	}
	function pi_link_after(item, degree, depth) {
		type   = item.parent("ul").attr("id");
		degree = degree + ((type == "basics") ? -1 : 0);
		
		$(".items li."+item.attr("id"))
			.each(function() {
				$(this).css({color: colors[5+degree]});
				if (type != "basics" && degree < 3) {
					line($(this).children("span"),item.children("span"),colors[5+degree-1],colors[5+degree]);
				}
				pi_link_after($(this),degree+1);
			});
	}
	
	$("#disco").toggle(
		function() {
			$(this).text("Disco!");
		}
	,
		function() {
			$(this).text("focus");
		}
	);
});
function canvas() {
	$("#canvas").attr({ 
		"height": $("#pi").outerHeight(),
		"width": $("#pi").outerWidth() 
	});
}
function line(a,b,c1,c2) {
	pad = 0;
	fx  = a.position().left + 4;
	fy  = a.position().top + a.height()/2 + 1;
	tx  = b.position().left + b.width() + 2;
	ty  = b.position().top + b.height()/2 + 1;

	var cvs = document.getElementById('canvas');

	var ctx = cvs.getContext('2d');
	ctx.lineWidth = 1;
	ctx.beginPath();
	ctx.moveTo(tx,ty);
	ctx.lineTo(fx,fy);
	ctx.globalAlpha = 0.5;

	var gdt = ctx.createLinearGradient( tx,ty, fx,fy );
	gdt.addColorStop(0, c1);
	gdt.addColorStop(1, c2);

	ctx.strokeStyle = gdt;
	ctx.stroke();
}


pi = {
	focus: ['::', 'Geog Major BA', 'Environment','Geomatics','Human', 'Physical'],
	basics: ['Opt 1 Pre-requisite', 'Pre-requisite 1', 'Pre-requisite 2', 'Opt 2 Pre-requisite', 'Opt 3 Pre-requisite', '7 Elective Courses'],
	years: {
		year1: ['Geog 101A Environment Society and Sustainability','Geog 101B Space, Place and Society','Geog 103 Introduction to Physical Geography', 'Geog 104 Our Digital Earth','Geog 130 Climate Change'],
		year2: ['Geog 209 Introduction to Environmental Management','Geog 211 Economic Geography','Geog 218 Social and Cultural Geography','Geog 222 Introduction to Maps and GIS','Geog 226 Quatitative Methods','Geog 228 Introduction to Remote Sensing','Geog 274 Introduction to Biogeography'],
		year3: ['Geog 316 Field Studies in Human Geography', 'Geog 317 Field Studies in Sustainable Communities', 'Geog 322 Digital Remote Sensing'],
		year4: ['Geog 422 Advanced Topics in Digital Remote Sensing', 'Geog 420 Field Studies in Coastal Geomatics']
	} 
}
</script>
</html>