---
title: "Progress Report: Interactive Geography Course Planning"
author: "Wendy Anthony"
date: "`r file.info(knitr::current_input())$ctime`"
output: ioslides_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
# output: ioslides_presentation
```

```{r load-package, echo=FALSE, results='hide', message=FALSE}
library(ggplot2)
library(plotly)
library(dplyr) # group_by summarise
```

# My Goal | Should I Choose To Accept the Challenge
![](images/Martlet-SocialSciences-transparent.png){height=50}  
To create an interactive tool for students to use for planning their journey through UVic Geography Courses towards their Geography BA degree.  



  
# The Results 


* Shiny App  

* One-page Web Clone of Shiny App  

* Interactive Flow Pathways  

* Programming Planning Form


## Shiny App 
* A Sandbox Playground To Test Concepts  
* https://wendyanthony.shinyapps.io/GeogInteract-app/

![](images/ShinyApp-Screenshot-2023-01-15-3.29.32.png){width=100%}


## One-page Web Clone of Shiny App 
* Developed in tandem with Shiny App  
* https://people.geog.uvic.ca/wanthony/website/geog-curriculum-maps/DataTable-shiny-to-web-tabs.html

![](images/Webpage-ShinyClone-Screenshot-2023-01-15-3.34.32.png){width=100%}


## Interactive Flow Pathways
* https://people.geog.uvic.ca/wanthony/website/geog-curriculum-maps/interact-flow-edit.html

![](images/Interactive-Pathways-Screenshot-2023-01-16-7.34.20.png){width=100%} 


## Programming Planning Form

### In very preliminary design/format/style stages  

![](images/Form-styled-ss.png){height=450}

* https://people.geog.uvic.ca/wanthony/website/geog-curriculum-maps/test/ProgramPlanning-Form-php-2-html.php
* https://people.geog.uvic.ca/wanthony/website/geog-curriculum-maps/DataTable-shiny-to-web-tabs.html#history



# Visualizing Geog Courses
* Animated Word Cloud  

* Mermaid Flowchart Diagram  

* Leaflet Map  

* Visualizing Geog Course Class Sizes

## Animated Word Cloud
![](Dataviz/Geog-Course-Desc-Wordcloud-images23-delay60-loop1-ezgif.com.png){height=550}

* https://people.geog.uvic.ca/wanthony/website/geog-curriculum-maps/images/Geog-Course-Desc-Wordcloud-images23-delay60-loop1-ezgif.com.png



## Mermaid Flowchart Diagram 
* Course Prerequisites as a Clickable PDF   
* https://people.geog.uvic.ca/wanthony/website/geog-curriculum-maps/images/mermaid-1-ss.pdf  

![](images/Mermaid-ss.png){height=400}
![](images/mermaid-code-ss.png){height=400}





## Leaflet Map
* I would like to eventually add Field Courses, Building locations, and other locations of interest  
* https://people.geog.uvic.ca/wanthony/website/geog-curriculum-maps/geog-students-leafletmap.html

![](images/LeafletMap-ss.png){width=100%}


## Visualizing Geog Course Class Sizes
* **Note**: Chart is interactive - missing info (summer classes?)
```{r summary-classSize2, class.output="scroll-100", echo=FALSE, warning=FALSE, message=FALSE}
# library(ggplot2)
# library(dplyr) # group_by summarise
## Summarise SubTask By Hours
gc <- read.csv("GeogInteract-app-WORKING/Geog-Course-flowcharts.csv")

# colnames(gc)

# group_by() sum()
# https://rveryday.wordpress.com/2016/11/30/how-to-summarize-a-data-frame-by-groups-in-r/
gc_group_sub <- gc %>% 
  select(Course, Name, Hours, ClassSize, Semester) %>% 
  group_by(Course) %>%  
  summarise(ClassSize = sum(ClassSize)) 

# dplyr reorder() to reverse the order of the SubTask
gc_group_bar_sub <- ggplot(gc_group_sub, 
                           aes(x =Course,  
                               # aes(x = reorder(Course, desc(Course)), 
                               y = ClassSize)) +
  # Error: Discrete value supplied to continuous scale
  # https://stackoverflow.com/questions/36325154/how-to-choose-variable-to-display-in-tooltip-when-using-ggplotly
  # tp_group_bar_sub <- ggplot(tl_group_sub, 
  #                          aes(x = reorder(SubTask, desc(SubTask)), 
  #                              y = TotalTimeHr,
  #                              label = SubTask)) +
    # tp_group_bar_sub <- ggplot(tl_group_sub, 
  #                          aes(x = reorder(SubTask, desc(SubTask)), 
  #                              y = TotalTimeHr,
  #                              text = SubTask)) +
  geom_bar(aes(fill = ClassSize),
           #geom_bar(aes(color = TaskType, fill = TaskType),           
           stat = "identity", position = "dodge",
           width = 0.35,
           fill = "#69A81D") +
  #ylim(0, 200) +
  # Error: Discrete value supplied to continuous scale
  #scale_y_continuous(limits = c(0, 200)) +
  labs(title = "Geography Course ClassSize",
       subtitle = "UVic Geog Interactive Course Explorations Web Tool",
       caption = "UVic Geography Wendy Anthony 2023",
       x = "Course", y = "Class Size") +
  #coord_flip() +

  #scale_fill_brewer("Pastel2") + # 
  # scale_fill_brewer() + # blues
  # scale_colour_brewer(palette = "Dark2") +
  # scale_colour_brewer(palette = "Accent") +
  theme_bw() +
  theme(legend.title = element_blank(),
        axis.text.x = element_text(angle = 45, vjust = 1.05, hjust = 1, size = 6))
        # axis.text.x = element_text(angle = 45, vjust = -1.75, hjust = 0.95, size = 6))
#theme_classic()
# stacked position = position_stack()
# side by side position = "dodge"

# gc_group_bar_sub

ggplotly(gc_group_bar_sub)

# https://stackoverflow.com/questions/38274213/adding-system-time-and-date-to-pdf-with-ggsave

 # ggsave(paste0("images/ClassSize-group-bar-sub", format(Sys.time(), "%Y-%m-%d_%H-%M"),
 #              ".png"), gc_group_bar_sub)
# 
# ggsave("images/TimePlot-group-bar_subtask-2023-01-20.png", tp_group_bar_sub)
```



# Progress of Coding Experiments 
* Things Already Done  
* Things in Progress  
* Things Still To Do (Wishlist)  
* Still Need  
* Questions  
* Challenges Faced


## Things Already Done
* Created **Interactive Course Data Table** that can be searched, filtered, sorted, and results saved!
* Cloned **RShiny App** to **one-page HTML Website**
* **Interactive Course Pathway Flow**  networking pre-requisites for UVic Geog course
* **Interactive Leaflet Map** [Leaflet Map](#leaflet-map) with markers for UVic location, doing field work
* Created [Animated Word Cloud](#animated-word-cloud) from Course Descriptions
* **Visualize Class Size**: [Interactive chart](#summarise-class-size)
* Created clickable pdf of [Mermaid Flowchart diagram](#mermaid-flowchart-diagram) of course prerequisites, linked to UVic Course Catalogue
* **Tips** for Use and Accessibility



## Things in Progress
* **Program Planning Form Trial ** [phpForm Trial](#programming-planning-worksheet-form)
* **Experimental Data Viz**: Gantt Time Chart



## Things Still To Do (Wishlist)
* **Course Planning Worksheet**: Interactive form to fill/save??    
    * https://people.geog.uvic.ca/wanthony/website/geog-curriculum-maps/test/ProgramPlanning-Form-php-2-html.php  
    * https://www.uvic.ca/students/undergraduate/program-planning/program-worksheets/worksheets/ppw-ss-geog-ba.pdf  
* **Interactive Leaflet Map Markers**: for Field Schools, UVic Buildings & Natural Areas, Community Mapping Partners
* **Hyperlinks to course catalogue** 
    * from data table or [Mermaid Course Flowchart diagram](https://people.geog.uvic.ca/wanthony/website/geog-curriculum-maps/images/mermaid-1-ss.pdf)
* **Network flow chart:**  highlight pathways between associated courses vs Interactive Pathway
* **Anything else?**



## Still Need
* List of **Summer Semester** Courses
* List of **Common Electives**



## Website Questions
* **Title?**
* **Keywords** for Internet search engine optimization
* **Formatting**: fonts (e.g. Serif: Times Roman, or Sans-serif)
* **Colour scheme, logo, etc**
* **Course Name format** to use (e.g. GEOG103, Geog103, or Geog 103)
* **Interactive Pathways**: Is it OK to use this pathways coding - it is copyrighted, though used for educational purpose >> or >> should I look into other networking vizualization tools instead (just using this for planning / design purposes)?
* **Course statistics** What would be interesting to view interactively?
* **Locations for field schools**, etc to add to map
* **Student feedback** / input? e.g. SOGS, Community Mapping Class



## Challenges Faced
* Creating Interactive Table that Saves Filtered Results
* Creating webpage nested tabs (still not able to do yet)



# Problems Encountered: | Exceeding Internet Use Limits
* ShinyApp  

* Telus Internet
 

## ShinyApp shinyapps.io
* exceeded free active hours 25 hours limit (11 days into monthly allowance) 

![](images/Shinyapp.io-activehouruse-ss-sm.png)



## Telus
* Used 92% of monthly data between January 11 - 23!

![](images/Telus-internetdata-ss.png){width=40%}

![](images/Telus-internet-use-graph-ss.png){width=50%}

![](images/Telus-internetuse-ss.png){height=450}



# Time Log: | How I Spent Time
* Visualizing Tasks  

* Visualizing Total Hours By Date  

* Visualizing SubTask By Hours  

* Sum of Total Hours


## Visualizing Time Log Tasks
* **Note**: These charts are interactive ... 
```{r, class.output="scroll-100", echo=FALSE}
# library(ggplot2)

tl <- read.csv("GeogInteract-app-WORKING/TimeLog-Current.csv")

# colnames(tl)

tp_stack <- ggplot(tl, aes(x = Date, y = TotalTimeHr)) +
  geom_bar(aes(fill = TaskType),
           #geom_bar(aes(color = TaskType, fill = TaskType),           
           stat = "identity", position = position_stack()) +
  ylim(0, 15) +
  labs(title = "Task Time Log for Geog Interactive Course Explorations", 
       caption = "UVic Geography Wendy Anthony 2023",
       x = "Date", y = "Total Hours") +
  #scale_fill_brewer("Pastel2") + # 
  # scale_fill_brewer() + # blues
  # scale_colour_brewer(palette = "Dark2") +
  # scale_colour_brewer(palette = "Accent") +
  theme_bw() + 
  theme(legend.title = element_blank(),
        axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=0.5))
  
#theme_classic()
# stacked position = position_stack()
# side by side position = "dodge"

ggplotly(tp_stack)

# ggsave(paste0("images/TimePlot-stack-", format(Sys.time(), "%Y%m%d_%H%M%S"),
#               ".png"), tp_stack)
# ggsave(paste0("images/TimePlot-stack-", format(Sys.time(), "%Y-%m-%d_%H-%M"),
#               ".png"), tp_stack)
# ggsave("images/TimePlot-stack-2023-01-14.png", tp_stack)
```




```{r, class.output="scroll-100", echo=FALSE}
# ## Summary of Total Hours By Date
# # library(ggplot2)
# # library(dplyr) # group_by summarise
# 
# tl <- read.csv("GeogInteract-app-WORKING/TimeLog-Current.csv")
# 
# # colnames(tl)
# 
# # group_by() sum()
# # https://rveryday.wordpress.com/2016/11/30/how-to-summarize-a-data-frame-by-groups-in-r/
# tl_group <- tl %>% 
#   select(Day, Date, TotalTimeMin, TotalTimeHr, TaskType) %>% 
#   group_by(Date) %>%  
#   summarise(TotalTimeHr = sum(TotalTimeHr)) 
# 
# tp_group_hour <- ggplot(tl_group, aes(x = Date, y = TotalTimeHr)) +
#   geom_bar(aes(fill = TotalTimeHr),
#            #geom_bar(aes(color = TaskType, fill = TaskType),           
#            stat = "identity", position = "dodge",
#            width = 0.35,
#            fill = "#69A81D") +
#   ylim(0, 15) +
#   labs(title = "Time Log by Day for Geog Interactive Course Explorations",
#        subtitle = "Group by Total Hours per Day",
#        caption = "UVic Geography Wendy Anthony 2023",
#        x = "Date", y = "Total Hours") +
#   #scale_fill_brewer("Pastel2") + # 
#   # scale_fill_brewer() + # blues
#   # scale_colour_brewer(palette = "Dark2") +
#   # scale_colour_brewer(palette = "Accent") +
#   theme_bw() +
#   theme(legend.title = element_blank(),
#         axis.text.x = element_text(angle = 90,vjust = .45, hjust = 0.75))
# #theme_classic()
# # stacked position = position_stack()
# # side by side position = "dodge"
# 
# ggplotly(tp_group_hour)


# https://stackoverflow.com/questions/38274213/adding-system-time-and-date-to-pdf-with-ggsave

# ggsave(paste0("images/TimePlot-group-bar-", format(Sys.time(), "%Y-%m-%d_%H-%M"),
#               ".png"), tp_group_hour)
```



## Summarise SubTask By Hours
```{r, class.output="scroll-100", echo=FALSE}
# library(ggplot2)
# library(dplyr) # group_by summarise
## Summarise SubTask By Hours
tl <- read.csv("GeogInteract-app-WORKING/TimeLog-Current.csv")

# colnames(tl)

# group_by() sum()
# https://rveryday.wordpress.com/2016/11/30/how-to-summarize-a-data-frame-by-groups-in-r/
tl_group_sub <- tl %>% 
  select(Day, Date, TotalTimeMin, TotalTimeHr, TaskType, SubTask) %>% 
  group_by(SubTask) %>%  
  summarise(TotalTimeHr = sum(TotalTimeHr)) 

# dplyr reorder() to reverse the order of the SubTask
tp_group_bar_sub <- ggplot(tl_group_sub, 
                           aes(x = reorder(SubTask, desc(SubTask)), 
                               y = TotalTimeHr)) +
  geom_bar(aes(fill = SubTask),
           #geom_bar(aes(color = TaskType, fill = TaskType),           
           stat = "identity", position = "dodge",
           width = 0.35,
           fill = "#69A81D") +
  ylim(0, 17.5) +
  labs(title = "Time Log by SubTask Type - Jan 6-20, 2023",
       subtitle = "UVic Geog Interactive Course Explorations Web Tool",
       caption = "UVic Geography Wendy Anthony 2023",
       x = "Sub Task", y = "Total Hours") +
  coord_flip() +

  #scale_fill_brewer("Pastel2") + # 
  # scale_fill_brewer() + # blues
  # scale_colour_brewer(palette = "Dark2") +
  # scale_colour_brewer(palette = "Accent") +
  theme_bw() +
  theme(legend.title = element_blank(),
        axis.text.x = element_text(angle = 0,vjust = .45, hjust = 0.75))
#theme_classic()  theme_bw()
# stacked position = position_stack()
# side by side position = "dodge"

ggplotly(tp_group_bar_sub)


# https://stackoverflow.com/questions/38274213/adding-system-time-and-date-to-pdf-with-ggsave

 # ggsave(paste0("images/TimePlot-group-bar-subtask", format(Sys.time(), "%Y-%m-%d_%H-%M"),
 #              ".png"), tp_group_bar_sub)
# 
# ggsave("images/TimePlot-group-bar_subtask-2023-01-20.png", tp_group_bar_sub)
```



## Sum of Total Hours
```{r, echo=FALSE}
TimeLog_current <- read.csv("GeogInteract-app-WORKING/TimeLog-Current.csv")
# TimeLog_current

# colnames(TimeLog_current)

# TimeLog_current$TotalTimeHr

TotalHours <- sum(TimeLog_current[, 'TotalTimeHr'])
TotalHours
```



# Images of Progress

* Shiny App  
  
* Shiny Web Clone  
  
* Interactive Program Planning Form


## Shiny App v1
![](images/ShinyApp-Screenshot-2023-01-08-7.46.16.png){width=100%}



## Shiny App v2
![](images/ShinyApp-Screenshot-2023-01-09-1.08.18.png){width=100%}



## Shiny App v3
![](images/ShinyApp-Screenshot-2023-01-11-3.00.18.png){width=100%}



## Shiny App v4
![](images/ShinyApp-Screenshot-2023-01-12-9.06.08.png){width=100%}



## Shiny App v5
![](images/ShinyApp-Screenshot-2023-01-14-2.46.15-Search-datatable-ss copy.png){width=100%}



## Shiny App Clone v1
![](images/ShinyClone-Screenshot-2023-01-14-1.47.06.png){width=100%}



## Shiny App Clone v2
![](images/ShinyClone-Screenshot-2023-01-15-3.34.32.png){width=100%}



## Shiny App Clone v3
![](images/ShinyClone-Screenshot-2023-01-19-7.50.09.png){width=100%}



## Shiny App Clone v4
![](images/ShinyClone-Screenshot-2023-01-19-6.17.57.png){width=100%}




## Interactive Program Planning Form v1
![](images/Form-Screenshot-2023-01-22-11.01.24.png){width=20%}



## Interactive Program Planning Form v2
![](images/Form-styled-ss.png){height=450}

# Thanx for your kind attention ... | Any questions, comments, feedback?

Wendy Anthony wanthony@uvic.ca  
![](images/Dynamic-edge-transparent.png){width=100% height=50}
